@model Ltwhqt.ViewModels.Admin.LoginViewModel
@{
    ViewBag.Title = "Đăng nhập hệ thống";
    Layout = "~/Views/Shared/_LayoutAuth.cshtml";
}

<div class="card shadow-sm border-0">
    <div class="card-body p-5">
        <div class="text-center mb-4">
            <div class="rounded-circle bg-primary bg-opacity-10 text-primary d-inline-flex align-items-center justify-content-center mb-3 auth-icon">
                <i class="bi bi-shield-lock fs-4"></i>
            </div>
            <h2 class="fw-bold mb-2 auth-heading">Đăng nhập hệ thống</h2>
            <p class="text-secondary mb-0 auth-subtitle">Nhập email và mật khẩu để tiếp tục làm việc.</p>
        </div>

        @* Display error messages *@
        @if (ViewBag.ErrorMessage != null)
        {
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Lỗi!</strong> @ViewBag.ErrorMessage
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        @if (ViewBag.SuccessMessage != null)
        {
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <strong>Thành công!</strong> @ViewBag.SuccessMessage
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        <form method="post" action="@Url.Content("~/login")" id="loginForm">
            <div class="mb-3">
                <label for="Email" class="form-label">Email</label>
                <input type="email"
                       class="form-control form-control-lg"
                       id="Email"
                       name="Email"
                       placeholder="email@example.com"
                       required
                       autocomplete="username"
                       value="@(Model?.Email ?? "")" />
            </div>

            <div class="mb-3">
                <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                    <label for="Password" class="form-label mb-0">Mật khẩu</label>
                    <a href="#" class="small text-decoration-none">Quên mật khẩu?</a>
                </div>
                <input type="password"
                       class="form-control form-control-lg"
                       id="Password"
                       name="Password"
                       placeholder="••••••••"
                       required
                       autocomplete="current-password" />
            </div>

            <div class="form-check mb-4">
                <input type="checkbox" class="form-check-input" id="RememberMe" name="RememberMe" value="true" />
                <input type="hidden" name="RememberMe" value="false" />
                <label for="RememberMe" class="form-check-label">Ghi nhớ đăng nhập</label>
            </div>

            <button type="submit" class="btn btn-primary btn-lg w-100" id="submitBtn">
                <i class="bi bi-box-arrow-in-right me-2"></i>Đăng nhập
            </button>

            <div class="text-center mt-3">
                <span class="text-secondary">Chưa có tài khoản?</span>
                <a href="@Url.Content("~/register")" class="text-decoration-none fw-semibold">Đăng ký ngay</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        console.log("Login page loaded");

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            console.log("Form submitted!");
            var email = document.getElementById('Email').value;
            var password = document.getElementById('Password').value;
            console.log("Email:", email);
            console.log("Password length:", password.length);

            // Let form submit naturally
        });
    </script>
}
