# Há»‡ Thá»‘ng Quáº£n LÃ½ Kho NhÃ  SÃ¡ch

## MÃ´ táº£
Há»‡ thá»‘ng quáº£n lÃ½ kho hÃ ng cho nhÃ  sÃ¡ch Ä‘Æ°á»£c xÃ¢y dá»±ng báº±ng ASP.NET MVC Framework vá»›i Entity Framework.

## TÃ­nh nÄƒng chÃ­nh
- âœ… **Quáº£n lÃ½ phiáº¿u nháº­p kho** tá»« nhÃ  cung cáº¥p
- âœ… **Quáº£n lÃ½ tá»“n kho** theo kho vÃ  sáº£n pháº©m
- âœ… **RÃ ng buá»™c nhÃ  cung cáº¥p**: Má»—i phiáº¿u nháº­p chá»‰ Ä‘Æ°á»£c nháº­p sáº£n pháº©m tá»« má»™t nhÃ  cung cáº¥p
- âœ… **Tá»± Ä‘á»™ng cáº­p nháº­t inventory** khi phiáº¿u nháº­p hoÃ n thÃ nh
- âœ… **Tracking inventory transactions**
- ğŸ“¦ Quáº£n lÃ½ sáº£n pháº©m vÃ  biáº¿n thá»ƒ
- ğŸ¢ Quáº£n lÃ½ nhÃ  cung cáº¥p
- ğŸª Quáº£n lÃ½ kho hÃ ng

## CÃ´ng nghá»‡ sá»­ dá»¥ng
- **Framework**: ASP.NET MVC 5
- **ORM**: Entity Framework 6 (Database First with EDMX)
- **Database**: SQL Server
- **Frontend**: Bootstrap 5, jQuery
- **Authentication**: Custom authentication with role-based access control

## YÃªu cáº§u há»‡ thá»‘ng
- .NET Framework 4.7.2 trá»Ÿ lÃªn
- SQL Server 2016 trá»Ÿ lÃªn
- Visual Studio 2019/2022 hoáº·c Visual Studio Code
- IIS Express (included with Visual Studio)

## CÃ i Ä‘áº·t

### 1. Clone repository
```bash
git clone <repository-url>
cd LTW-HQT-QuanLyKhoNhaSach-master
```

### 2. Restore NuGet packages
```bash
cd DoAnLTWHQT
nuget restore
# Hoáº·c trong Visual Studio: Right-click solution > Restore NuGet Packages
```

### 3. Cáº¥u hÃ¬nh Database
Má»Ÿ `DoAnLTWHQT\Web.config` vÃ  cáº­p nháº­t connection string:

```xml
<connectionStrings>
  <add name="Entities" 
       connectionString="metadata=res://*/Perw.csdl|res://*/Perw.ssdl|res://*/Perw.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=YOUR_SERVER;initial catalog=YOUR_DATABASE;integrated security=True;trustservercertificate=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
       providerName="System.Data.EntityClient" />
</connectionStrings>
```

**Thay tháº¿**:
- `YOUR_SERVER`: TÃªn SQL Server instance cá»§a báº¡n (vd: `localhost`, `.\SQLEXPRESS`)
- `YOUR_DATABASE`: TÃªn database (vd: `QuanLyKhoNhaSach`)

### 4. Cháº¡y database script
Import database schema tá»« file SQL (náº¿u cÃ³) hoáº·c táº¡o database tá»« EDMX.

### 5. Build vÃ  Run
```bash
# Build trong Visual Studio hoáº·c
msbuild DoAnLTWHQT.csproj /p:Configuration=Debug

# Run
# Nháº¥n F5 trong Visual Studio hoáº·c
# iisexpress /path:"%cd%" /port:8080
```

## Cáº¥u trÃºc Project

```
DoAnLTWHQT/
â”œâ”€â”€ Areas/
â”‚   â””â”€â”€ Warehouse/              # Warehouse management area
â”‚       â”œâ”€â”€ Controllers/
â”‚       â”‚   â””â”€â”€ ShipmentsController.cs  # Inbound receipt management
â”‚       â””â”€â”€ Views/
â”‚           â””â”€â”€ Shipments/
â”œâ”€â”€ Controllers/                # Main controllers
â”œâ”€â”€ Models/                     # (Entity classes auto-generated from EDMX)
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ Warehouse/             # ViewModels for warehouse features
â”œâ”€â”€ Views/                      # Razor views
â”œâ”€â”€ Content/                    # CSS files  
â”œâ”€â”€ Scripts/                    # JavaScript files
â”œâ”€â”€ Perw.edmx                  # Entity Data Model
â””â”€â”€ Web.config                 # Configuration

Entity Files (Auto-generated from EDMX):
â”œâ”€â”€ product.cs
â”œâ”€â”€ product_variants.cs
â”œâ”€â”€ supplier.cs
â”œâ”€â”€ warehouse.cs
â”œâ”€â”€ inbound_receipts.cs
â”œâ”€â”€ inbound_receipt_details.cs
â”œâ”€â”€ inventory.cs
â””â”€â”€ inventory_transactions.cs
```

## Database Schema

### Core Tables
- `products` - Sáº£n pháº©m
- `product_variants` - Biáº¿n thá»ƒ sáº£n pháº©m (SKU)
- `suppliers` - NhÃ  cung cáº¥p
- `warehouses` - Kho hÃ ng
- `inbound_receipts` - Phiáº¿u nháº­p kho
- `inbound_receipt_details` - Chi tiáº¿t phiáº¿u nháº­p
- `inventories` - Tá»“n kho
- `inventory_transactions` - Lá»‹ch sá»­ giao dá»‹ch kho

## API/Endpoints chÃ­nh

### Warehouse Management
- `GET /Warehouse/Shipments` - Danh sÃ¡ch phiáº¿u nháº­p
- `GET /Warehouse/Shipments/Create` - Form táº¡o phiáº¿u nháº­p
- `POST /Warehouse/Shipments/Create` - Xá»­ lÃ½ táº¡o phiáº¿u nháº­p
- `GET /Warehouse/Shipments/Details/{id}` - Chi tiáº¿t phiáº¿u nháº­p
- `POST /Warehouse/Shipments/Delete/{id}` - XÃ³a phiáº¿u nháº­p
- `GET /Warehouse/Shipments/GetProductVariantsBySupplierId?supplierId={id}` - Láº¥y products theo supplier (AJAX)

## LÆ°u Ã½ quan trá»ng

### Entity Files
**KHÃ”NG XÃ“A** cÃ¡c file entity (`product.cs`, `address.cs`, etc.) dÃ¹ chÃºng cÃ³ comment `<auto-generated>`. 
- CÃ¡c files nÃ y Ä‘Æ°á»£c generate tá»« `Perw.edmx`
- Entity Framework cáº§n cÃ¡c files nÃ y Ä‘á»ƒ ORM hoáº¡t Ä‘á»™ng
- Chá»‰ regenerate khi update EDMX model

### Connection String Security
Repository nÃ y **BÃO Gá»’M** connection string cho má»¥c Ä‘Ã­ch demo/development.
**TRONG PRODUCTION**: 
- Sá»­ dá»¥ng environment variables
- Sá»­ dá»¥ng Azure Key Vault hoáº·c tÆ°Æ¡ng tá»±
- KHÃ”NG commit connection strings cÃ³ credentials tháº­t

### NuGet Packages
Folder `packages/` Ä‘Æ°á»£c gitignore. Cháº¡y `nuget restore` Ä‘á»ƒ download dependencies.

## Troubleshooting

### Build Errors
1. **Missing packages**: Run `nuget restore`
2. **Entity class not found**: Check if EDMX entity files exist
3. **Connection error**: Verify connection string in Web.config

### Runtime Errors
1. **404 on Area routes**: Check `WarehouseAreaRegistration.cs` registered
2. **Database connection failed**: Verify SQL Server running and connection string correct
3. **Model binding error**: Check ViewModel properties match form fields

## License
Educational project - use freely for learning purposes.

## ÄÃ³ng gÃ³p
Project nÃ y Ä‘Æ°á»£c phÃ¡t triá»ƒn cho má»¥c Ä‘Ã­ch há»c táº­p vÃ  nghiÃªn cá»©u.
