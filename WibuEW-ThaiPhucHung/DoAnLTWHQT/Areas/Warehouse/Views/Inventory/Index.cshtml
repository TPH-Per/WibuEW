@model IEnumerable<Ltwhqt.ViewModels.Warehouse.WarehouseInventoryItemViewModel>
@{
    ViewBag.Title = "Tồn kho kho trung tâm";
    var filter = ViewBag.Filter as string ?? "all";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="h4 mb-1">Inventory overview</h2>
        <p class="text-secondary mb-0">Theo dõi on-hand, reserved, reorder level.</p>
    </div>
    <form method="get" class="d-flex gap-2">
        <select class="form-select" name="filter" onchange="this.form.submit()">
            <option value="all" @(filter == "all" ? "selected" : null)>Tất cả</option>
            <option value="low" @(filter == "low" ? "selected" : null)>Tồn thấp</option>
            <option value="zero" @(filter == "zero" ? "selected" : null)>Hết hàng</option>
        </select>
    </form>
</div>

<div class="card border-0 shadow-sm">
    <div class="table-responsive">
        <table class="table align-middle mb-0">
            <thead>
                <tr>
                    <th>SKU</th>
                    <th>Sản phẩm</th>
                    <th>Tồn thực tế</th>
                    <th>Đang giữ</th>
                    <th>Reorder level</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="@(item.IsLowStock ? "table-warning" : null)">
                        <td class="fw-semibold">@item.Sku</td>
                        <td>
                            <div>@item.ProductName</div>
                            <small class="text-secondary">@item.VariantName</small>
                        </td>
                        <td>@item.QuantityOnHand</td>
                        <td>@item.QuantityReserved</td>
                        <td>@item.ReorderLevel</td>
                        <td class="text-end">
                            <a class="btn btn-sm btn-outline-secondary" href="@Url.Action("Detail", new { variantId = item.VariantId })">Chi tiết</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
